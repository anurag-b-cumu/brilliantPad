(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{4975:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/invoice/[id]",function(){return r(4790)}])},4064:function(e,t,r){"use strict";r.d(t,{h:function(){return c}});var s=r(5893),a=r(5614),i=r(9008),n=r.n(i),l=r(1664),d=r.n(l);function c(e){let{title:t,pageTitle:r}=e,{theme:i,toggleTheme:l}=(0,a.F)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n(),{children:(0,s.jsx)("title",{children:r?"".concat(r," - Brilliant Pad Store"):"Brilliant Pad Store"})}),(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm transition-colors duration-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(d(),{href:"/",className:"text-2xl font-bold text-gray-900 dark:text-white",children:t}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)("button",{onClick:l,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Switch to ".concat("light"===i?"dark":"light"," mode"),children:"light"===i?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"})})})})]})})})]})}},4790:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(5893),a=r(7294),i=r(1163),n=r(4064);function l(){let e=(0,i.useRouter)(),{id:t}=e.query,[r,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1),[o,x]=(0,a.useState)(0),[h,g]=(0,a.useState)(!1),[m,u]=(0,a.useState)("idle");(0,a.useEffect)(()=>{t&&y()},[t]);let y=async()=>{try{let e=await fetch("/api/invoices/".concat(t)),r=await e.json();l(r)}catch(e){console.error("Error fetching invoice:",e)}},b=async()=>{if(r){g(!0),u("processing");try{await new Promise(e=>setTimeout(e,2e3)),u("success"),await fetch("/api/invoices/".concat(r._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"paid",brilliantPads:d?{quantity:o,price:100}:void 0})}),setTimeout(()=>{e.push("/invoice/success?session_id=mock_session_".concat(r._id))},1500)}catch(e){console.error("Error processing payment:",e),u("error")}finally{g(!1)}}};if(!r)return(0,s.jsx)("div",{className:"p-6",children:"Loading..."});let k=r.items.reduce((e,t)=>e+t.price*t.quantity,0),j=100*o;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[(0,s.jsx)(n.h,{title:"Invoice Details",pageTitle:"Invoice"}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"Invoice Details"}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Selected Dogs"}),r.items.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.dogId.name}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:e.dogId.breed})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-300",children:["Quantity: ",e.quantity]}),(0,s.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.price*e.quantity]})]})]},t))]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Brilliant Pads"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Would you like to add Brilliant Pads to your order? Each pad costs $100."}),d?(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("label",{className:"text-gray-700 dark:text-gray-300",children:"Quantity:"}),(0,s.jsxs)("div",{className:"flex items-center border dark:border-gray-600 rounded bg-white dark:bg-gray-800",children:[(0,s.jsx)("button",{onClick:()=>x(Math.max(1,o-1)),className:"px-3 py-1 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"-"}),(0,s.jsx)("input",{type:"number",min:"1",value:o,onChange:e=>x(Math.max(1,parseInt(e.target.value)||1)),className:"w-16 text-center border-x dark:border-gray-600 py-1 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,s.jsx)("button",{onClick:()=>x(o+1),className:"px-3 py-1 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"+"})]}),(0,s.jsxs)("span",{className:"text-gray-700 dark:text-gray-300",children:["Total: $",100*o]})]}),(0,s.jsx)("button",{onClick:()=>{c(!1),x(0)},className:"text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Remove Brilliant Pads",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}):(0,s.jsx)("button",{onClick:()=>c(!0),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Yes, I'm Interested"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Total Amount:"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",k+j]})]}),"success"===m?(0,s.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-green-500 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("p",{className:"text-green-700 dark:text-green-300",children:"Payment Successful! Redirecting..."})]}):"error"===m?(0,s.jsxs)("div",{className:"text-center p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-red-500 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("p",{className:"text-red-700 dark:text-red-300",children:"Payment failed. Please try again."})]}):(0,s.jsx)("button",{onClick:b,disabled:h||"processing"===m,className:"w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 transition-colors relative",children:"processing"===m?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Payment..."]}):"Proceed to Checkout"})]})]})]})}}},function(e){e.O(0,[424,774,888,179],function(){return e(e.s=4975)}),_N_E=e.O()}]);