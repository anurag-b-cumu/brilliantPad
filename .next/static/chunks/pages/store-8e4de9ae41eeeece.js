(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{6407:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store",function(){return r(7750)}])},4064:function(e,t,r){"use strict";r.d(t,{h:function(){return o}});var a=r(5893),s=r(5614),l=r(9008),n=r.n(l),i=r(1664),d=r.n(i);function o(e){let{title:t,pageTitle:r}=e,{theme:l,toggleTheme:i}=(0,s.F)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{children:r?"".concat(r," - Brilliant Pad Store"):"Brilliant Pad Store"})}),(0,a.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm transition-colors duration-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(d(),{href:"/",className:"text-2xl font-bold text-gray-900 dark:text-white",children:t}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("button",{onClick:i,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Switch to ".concat("light"===l?"dark":"light"," mode"),children:"light"===l?(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"})})})})]})})})]})}},7750:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(5893),s=r(7294);function l(e){let{onSearch:t}=e;return(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("input",{type:"text",placeholder:"Search dogs by name or breed...",onChange:e=>{t(e.target.value)},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}function n(e){let{dogs:t,onAddToCart:r}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(e=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative pt-[56.25%]",children:[" ",(0,a.jsx)("img",{src:e.image||"/placeholder-dog.jpg",alt:e.name,className:"absolute top-0 left-0 w-full h-full object-cover"})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:e.breed}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:e.description}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["$",e.price]}),(0,a.jsx)("button",{onClick:()=>r(e),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Add to Cart"})]})]})]},e._id))})}function i(e){let{dogs:t,onAddToCart:r}=e,[l,i]=(0,s.useState)("all"),[d,o]=(0,s.useState)(!1),[c,x]=(0,s.useState)(!1),g=(0,s.useRef)(null),u=["all",...new Set(t.map(e=>e.breed))],h="all"===l?t:t.filter(e=>e.breed===l),m=e=>{if(g.current){let t=g.current.scrollLeft+("left"===e?-200:200);g.current.scrollTo({left:t,behavior:"smooth"})}};return(0,a.jsxs)("div",{className:"w-full overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative mb-6 border-b border-gray-200 dark:border-gray-700",children:[d&&(0,a.jsx)("button",{onClick:()=>m("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white dark:bg-gray-800 shadow-md rounded-r-lg p-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","aria-label":"Scroll left",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c&&(0,a.jsx)("button",{onClick:()=>m("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white dark:bg-gray-800 shadow-md rounded-l-lg p-2 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","aria-label":"Scroll right",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,a.jsx)("div",{ref:g,onScroll:()=>{if(g.current){let{scrollLeft:e,scrollWidth:t,clientWidth:r}=g.current;o(e>0),x(e<t-r-10)}},className:"overflow-x-auto mx-8 custom-scrollbar",children:(0,a.jsx)("div",{className:"inline-flex pb-2 min-w-max",children:u.map(e=>(0,a.jsx)("button",{onClick:()=>i(e),className:"\n                  px-4 py-2 mr-2 whitespace-nowrap rounded-lg font-medium text-sm\n                  ".concat(l===e?"bg-blue-500 text-white":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700","\n                  transition-colors duration-200 last:mr-0\n                "),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})})]}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(n,{dogs:h,onAddToCart:r})})]})}var d=r(1163);function o(e){let{items:t,onUpdateQuantity:r,onGenerateInvoice:l,invoiceStatus:n,currentInvoice:i}=e,[o,c]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[u,h]=(0,s.useState)(!1);(0,d.useRouter)();let m=t.reduce((e,t)=>e+t.price*t.quantity,0),b=e=>{e.preventDefault(),l({name:o,email:x}),h(!1),c(""),g("")},y=()=>{switch(n){case"sending":return(0,a.jsxs)("div",{className:"text-center p-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Sending invoice..."})]});case"sent":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,a.jsx)("div",{className:"animate-pulse flex items-center justify-center mb-2",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:"Invoice sent successfully!"}),(0,a.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Simulating payment process..."})]}),i&&(0,a.jsxs)("div",{className:"border-t dark:border-gray-700 pt-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Invoice Details"}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Sent to: ",i.customerEmail]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Amount: $",i.totalAmount]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 italic",children:"(Payment will be confirmed in a few seconds...)"})]})]})]});case"paid":return(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-500 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("p",{className:"text-green-700 dark:text-green-300 mb-2",children:"Payment Confirmed!"}),(0,a.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400 mb-4",children:"Redirecting to order details..."}),(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-500 mx-auto"})]});default:return(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Customer Name",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,a.jsx)("input",{type:"email",placeholder:"Customer Email",value:x,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>h(!1),className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-2 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 bg-blue-500 text-white py-2 rounded hover:bg-blue-600 transition-colors",children:"Send Invoice"})]})]})}};return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Shopping Cart"}),"idle"===n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:0===t.length?(0,a.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Your cart is empty"}):t.map((e,t)=>(0,a.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.breed})]}),(0,a.jsx)("button",{onClick:()=>r(t,0),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 p-1",title:"Remove from cart",children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Quantity:"}),(0,a.jsxs)("div",{className:"flex items-center border dark:border-gray-600 rounded",children:[(0,a.jsx)("button",{onClick:()=>r(t,Math.max(1,e.quantity-1)),className:"px-2 py-1 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600",children:"-"}),(0,a.jsx)("input",{type:"number",min:"1",value:e.quantity,onChange:e=>r(t,parseInt(e.target.value)||1),className:"w-12 text-center border-x dark:border-gray-600 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),(0,a.jsx)("button",{onClick:()=>r(t,e.quantity+1),className:"px-2 py-1 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600",children:"+"})]})]}),(0,a.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.price*e.quantity]})]})]},e._id))}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Total:"}),(0,a.jsxs)("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["$",m]})]}),u?y():(0,a.jsx)("button",{onClick:()=>h(!0),className:"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transition-colors",disabled:0===t.length,children:0===t.length?"Add items to cart":"Generate Invoice"})]})]}):(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:y()})]})}var c=r(4064);function x(){let[e,t]=(0,s.useState)(""),[r,n]=(0,s.useState)([]),[x,g]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[m,b]=(0,s.useState)(""),[y,p]=(0,s.useState)(!1),[j,f]=(0,s.useState)("idle"),[v,k]=(0,s.useState)(null),[N,w]=(0,s.useState)(null),C=(0,d.useRouter)();(0,s.useEffect)(()=>{S()},[]),(0,s.useEffect)(()=>{let e;return"sent"===j&&v&&(e=setInterval(async()=>{try{let t=await fetch("/api/invoices/".concat(v)),r=await t.json();"paid"===r.status&&(f("paid"),g([]),clearInterval(e),setTimeout(()=>{C.push("/payment-confirmation/".concat(v))},2e3))}catch(e){console.error("Error checking payment status:",e)}},2e3)),()=>{e&&clearInterval(e)}},[j,v,C]);let S=async()=>{try{h(!0);let e=await fetch("/api/dogs"),t=await e.json();n(t)}catch(e){b("Failed to load dogs. Please try again later."),console.error("Error fetching dogs:",e)}finally{h(!1)}},L=r.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.breed.toLowerCase().includes(e.toLowerCase())),_=async e=>{p(!0),f("sending");try{let t=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerData:e,items:x})});if(!t.ok)throw Error("Failed to generate invoice");let r=await t.json();k(r._id),w(r),f("sent")}catch(e){console.error("Error generating invoice:",e),alert("Failed to generate invoice. Please try again."),f("idle")}finally{p(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[(0,a.jsx)(c.h,{title:"Brilliant Pad Store",pageTitle:"Store"}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 max-w-full",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Available Dogs"}),(0,a.jsx)(l,{onSearch:t}),u?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):m?(0,a.jsx)("div",{className:"text-center text-red-500 py-8",children:m}):0===L.length?(0,a.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No dogs found matching your search."}):(0,a.jsx)(i,{dogs:L,onAddToCart:e=>{g(t=>t.find(t=>t._id===e._id)?t.map(t=>t._id===e._id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])}})]})}),(0,a.jsx)("div",{className:"lg:w-[320px] flex-shrink-0",children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 sticky top-8",children:(0,a.jsx)(o,{items:x,onUpdateQuantity:(e,t)=>{g(r=>t<=0?r.filter((t,r)=>r!==e):r.map((r,a)=>a===e?{...r,quantity:t}:r))},onGenerateInvoice:_,invoiceStatus:j,currentInvoice:N})})})]})}),(0,a.jsx)("footer",{className:"bg-white dark:bg-gray-800 border-t dark:border-gray-700 mt-auto transition-colors duration-200",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsx)("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"\xa9 2024 Brilliant Pad Store. All rights reserved."})})})]})}}},function(e){e.O(0,[424,774,888,179],function(){return e(e.s=6407)}),_N_E=e.O()}]);